<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of getHessian</title>
  <meta name="keywords" content="getHessian">
  <meta name="description" content="Computes the Hessian of the cost function at x along d.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">manopt</a> &gt; <a href="index.html">core</a> &gt; getHessian.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for manopt\core&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>getHessian
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>Computes the Hessian of the cost function at x along d.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function hess = getHessian(problem, x, d, storedb, key) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Computes the Hessian of the cost function at x along d.

 function hess = getHessian(problem, x, d)
 function hess = getHessian(problem, x, d, storedb)
 function hess = getHessian(problem, x, d, storedb, key)

 Returns the Hessian at x along d of the cost function described in the
 problem structure.

 storedb is a StoreDB object, key is the StoreDB key to point x.

 If an exact Hessian is not provided, an approximate Hessian is returned
 if possible, without warning. If not possible, an exception will be
 thrown. To check whether an exact Hessian is available or not (typically
 to issue a warning if not), use canGetHessian.

 See also: <a href="getPrecon.html" class="code" title="function Pd = getPrecon(problem, x, d, storedb, key)">getPrecon</a> <a href="getApproxHessian.html" class="code" title="function approxhess = getApproxHessian(problem, x, d, storedb, key)">getApproxHessian</a> <a href="canGetHessian.html" class="code" title="function candoit = canGetHessian(problem)">canGetHessian</a></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="StoreDB.html" class="code" title="">StoreDB</a>	</li><li><a href="canGetEuclideanGradient.html" class="code" title="function candoit = canGetEuclideanGradient(problem)">canGetEuclideanGradient</a>	Checks whether the Euclidean gradient can be computed for a problem.</li><li><a href="getApproxHessian.html" class="code" title="function approxhess = getApproxHessian(problem, x, d, storedb, key)">getApproxHessian</a>	Computes an approximation of the Hessian of the cost fun. at x along d.</li><li><a href="getEuclideanGradient.html" class="code" title="function egrad = getEuclideanGradient(problem, x, storedb, key)">getEuclideanGradient</a>	Computes the Euclidean gradient of the cost function at x.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../manopt/solvers/arc/arc_conjugate_gradient.html" class="code" title="function [eta, Heta, hesscalls, stop_str, stats] = arc_conjugate_gradient(problem, x, grad, gradnorm, sigma, options, storedb, key)">arc_conjugate_gradient</a>	Subproblem solver for ARC based on a nonlinear conjugate gradient method.</li><li><a href="../../manopt/solvers/arc/arc_gradient_descent.html" class="code" title="function [eta, Heta, hesscalls, stop_str, stats] = arc_gradient_descent(problem, x, grad, gradnorm, sigma, options, storedb, key)">arc_gradient_descent</a>	Subproblem solver for ARC based on gradient descent.</li><li><a href="../../manopt/solvers/arc/arc_lanczos.html" class="code" title="function [eta, Heta, hesscalls, stop_str, stats] = arc_lanczos(problem, x, grad, gradnorm, sigma, options, storedb, key)">arc_lanczos</a>	Subproblem solver for ARC based on a Lanczos process.</li><li><a href="../../manopt/solvers/preconditioners/preconhessiansolve.html" class="code" title="function preconfun = preconhessiansolve(problem, options)">preconhessiansolve</a>	Preconditioner based on the inverse Hessian, by solving linear systems.</li><li><a href="../../manopt/solvers/trustregions/trs_tCG.html" class="code" title="function trsoutput = trs_tCG(problem, trsinput, options, storedb, key)">trs_tCG</a>	Truncated (Steihaug-Toint) Conjugate-Gradient method.</li><li><a href="../../manopt/solvers/trustregions/trs_tCG_cached.html" class="code" title="function trsoutput = trs_tCG_cached(problem, trsinput, options, storedb, key)">trs_tCG_cached</a>	Truncated (Steihaug-Toint) Conjugate-Gradient method with caching.</li><li><a href="../../manopt/solvers/trustregions/trustregions.html" class="code" title="function [x, cost, info, options] = trustregions(problem, x, options)">trustregions</a>	Riemannian trust-regions solver for optimization on manifolds.</li><li><a href="../../manopt/tools/checkhessian.html" class="code" title="function checkhessian(problem, x, d)">checkhessian</a>	Checks the consistency of the cost function and the Hessian.</li><li><a href="../../manopt/tools/criticalpointfinder.html" class="code" title="function problem_critpt = criticalpointfinder(problem)">criticalpointfinder</a>	Creates a Manopt problem whose optima are the critical points of another.</li><li><a href="../../manopt/tools/hessianextreme.html" class="code" title="function [y, lambda, info] = hessianextreme(problem, x, side, y0, options, storedb, key)">hessianextreme</a>	Compute an extreme eigenvector / eigenvalue of the Hessian of a problem.</li><li><a href="../../manopt/tools/hessianmatrix.html" class="code" title="function [H, basis] = hessianmatrix(problem, x, basis)">hessianmatrix</a>	Computes a matrix which represents the Hessian in some tangent basis.</li><li><a href="../../manopt/tools/hessianspectrum.html" class="code" title="function lambdas = hessianspectrum(problem, x, usepreconstr, storedb, key)">hessianspectrum</a>	Returns the eigenvalues of the (preconditioned) Hessian at x.</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function hess = getHessian(problem, x, d, storedb, key)</a>
0002 <span class="comment">% Computes the Hessian of the cost function at x along d.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% function hess = getHessian(problem, x, d)</span>
0005 <span class="comment">% function hess = getHessian(problem, x, d, storedb)</span>
0006 <span class="comment">% function hess = getHessian(problem, x, d, storedb, key)</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% Returns the Hessian at x along d of the cost function described in the</span>
0009 <span class="comment">% problem structure.</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% storedb is a StoreDB object, key is the StoreDB key to point x.</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% If an exact Hessian is not provided, an approximate Hessian is returned</span>
0014 <span class="comment">% if possible, without warning. If not possible, an exception will be</span>
0015 <span class="comment">% thrown. To check whether an exact Hessian is available or not (typically</span>
0016 <span class="comment">% to issue a warning if not), use canGetHessian.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% See also: getPrecon getApproxHessian canGetHessian</span>
0019 
0020 <span class="comment">% This file is part of Manopt: www.manopt.org.</span>
0021 <span class="comment">% Original author: Nicolas Boumal, Dec. 30, 2012.</span>
0022 <span class="comment">% Contributors:</span>
0023 <span class="comment">% Change log:</span>
0024 <span class="comment">%</span>
0025 <span class="comment">%   April 3, 2015 (NB):</span>
0026 <span class="comment">%       Works with the new StoreDB class system.</span>
0027 <span class="comment">%</span>
0028 <span class="comment">%   Feb. 10, 2020 (NB):</span>
0029 <span class="comment">%       Allowing M.ehess2rhess to take (storedb, key) as extra inputs.</span>
0030 
0031     <span class="comment">% Allow omission of the key, and even of storedb.</span>
0032     <span class="keyword">if</span> ~exist(<span class="string">'key'</span>, <span class="string">'var'</span>)
0033         <span class="keyword">if</span> ~exist(<span class="string">'storedb'</span>, <span class="string">'var'</span>)
0034             storedb = <a href="StoreDB.html" class="code" title="">StoreDB</a>();
0035         <span class="keyword">end</span>
0036         key = storedb.getNewKey();
0037     <span class="keyword">end</span>
0038     
0039     
0040     <span class="keyword">if</span> isfield(problem, <span class="string">'hess'</span>)
0041     <span class="comment">%% Compute the Hessian using hess.</span>
0042     
0043         <span class="comment">% Check whether this function wants to deal with storedb or not.</span>
0044         <span class="keyword">switch</span> nargin(problem.hess)
0045             <span class="keyword">case</span> 2
0046                 hess = problem.hess(x, d);
0047             <span class="keyword">case</span> 3
0048                 <span class="comment">% Obtain, pass along, and save the store for x.</span>
0049                 store = storedb.getWithShared(key);
0050                 [hess, store] = problem.hess(x, d, store);
0051                 storedb.setWithShared(store, key);
0052             <span class="keyword">case</span> 4
0053                 <span class="comment">% Pass along the whole storedb (by reference), with key.</span>
0054                 hess = problem.hess(x, d, storedb, key);
0055             <span class="keyword">otherwise</span>
0056                 up = MException(<span class="string">'manopt:getHessian:badhess'</span>, <span class="keyword">...</span>
0057                     <span class="string">'hess should accept 2, 3 or 4 inputs.'</span>);
0058                 throw(up);
0059         <span class="keyword">end</span>
0060     
0061     <span class="keyword">elseif</span> isfield(problem, <span class="string">'ehess'</span>) &amp;&amp; <a href="canGetEuclideanGradient.html" class="code" title="function candoit = canGetEuclideanGradient(problem)">canGetEuclideanGradient</a>(problem)
0062     <span class="comment">%% Compute the Hessian using ehess.</span>
0063     
0064         <span class="comment">% We will need the Euclidean gradient for the conversion from the</span>
0065         <span class="comment">% Euclidean Hessian to the Riemannian Hessian.</span>
0066         egrad = <a href="getEuclideanGradient.html" class="code" title="function egrad = getEuclideanGradient(problem, x, storedb, key)">getEuclideanGradient</a>(problem, x, storedb, key);
0067         
0068         <span class="comment">% Check whether this function wants to deal with storedb or not.</span>
0069         <span class="keyword">switch</span> nargin(problem.ehess)
0070             <span class="keyword">case</span> 2
0071                 ehess = problem.ehess(x, d);
0072             <span class="keyword">case</span> 3
0073                 <span class="comment">% Obtain, pass along, and save the store for x.</span>
0074                 store = storedb.getWithShared(key);
0075                 [ehess, store] = problem.ehess(x, d, store);
0076                 storedb.setWithShared(store, key);
0077             <span class="keyword">case</span> 4
0078                 <span class="comment">% Pass along the whole storedb (by reference), with key.</span>
0079                 ehess = problem.ehess(x, d, storedb, key);
0080             <span class="keyword">otherwise</span>
0081                 up = MException(<span class="string">'manopt:getHessian:badehess'</span>, <span class="keyword">...</span>
0082                     <span class="string">'ehess should accept 2, 3 or 4 inputs.'</span>);
0083                 throw(up);
0084         <span class="keyword">end</span>
0085         
0086         <span class="comment">% Convert to the Riemannian Hessian</span>
0087         <span class="keyword">switch</span> nargin(problem.M.ehess2rhess)
0088             <span class="keyword">case</span> 4
0089                 hess = problem.M.ehess2rhess(x, egrad, ehess, d);
0090             <span class="keyword">case</span> 6
0091                 hess = problem.M.ehess2rhess(x, egrad, ehess, d, storedb, key);
0092             <span class="keyword">otherwise</span>
0093                 up = MException(<span class="string">'manopt:getHessian:ehess2rhess'</span>, <span class="keyword">...</span>
0094                     <span class="string">'ehess2rhess should accept 4 or 6 inputs.'</span>);
0095                 throw(up);
0096         <span class="keyword">end</span>
0097         
0098     <span class="keyword">else</span>
0099     <span class="comment">%% Attempt the computation of an approximation of the Hessian.</span>
0100         
0101         hess = <a href="getApproxHessian.html" class="code" title="function approxhess = getApproxHessian(problem, x, d, storedb, key)">getApproxHessian</a>(problem, x, d, storedb, key);
0102         
0103     <span class="keyword">end</span>
0104     
0105 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Fri 30-Sep-2022 13:18:25 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>