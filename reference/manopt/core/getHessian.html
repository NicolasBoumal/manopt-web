<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of getHessian</title>
  <meta name="keywords" content="getHessian">
  <meta name="description" content="Computes the Hessian of the cost function at x along d.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">manopt</a> &gt; <a href="index.html">core</a> &gt; getHessian.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for manopt\core&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>getHessian
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>Computes the Hessian of the cost function at x along d.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function hess = getHessian(problem, x, d, storedb, key) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Computes the Hessian of the cost function at x along d.

 function hess = getHessian(problem, x, d)
 function hess = getHessian(problem, x, d, storedb)
 function hess = getHessian(problem, x, d, storedb, key)

 Returns the Hessian at x along d of the cost function described in the
 problem structure.

 storedb is a StoreDB object, key is the StoreDB key to point x.

 If an exact Hessian is not provided, an approximate Hessian is returned
 if possible, without warning. If not possible, an exception will be
 thrown. To check whether an exact Hessian is available or not (typically
 to issue a warning if not), use canGetHessian.

 See also: <a href="getPrecon.html" class="code" title="function Pd = getPrecon(problem, x, d, storedb, key)">getPrecon</a> <a href="getApproxHessian.html" class="code" title="function approxhess = getApproxHessian(problem, x, d, storedb, key)">getApproxHessian</a> <a href="canGetHessian.html" class="code" title="function candoit = canGetHessian(problem)">canGetHessian</a></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="StoreDB.html" class="code" title="">StoreDB</a>	</li><li><a href="canGetEuclideanGradient.html" class="code" title="function candoit = canGetEuclideanGradient(problem)">canGetEuclideanGradient</a>	Checks whether the Euclidean gradient can be computed for a problem.</li><li><a href="getApproxHessian.html" class="code" title="function approxhess = getApproxHessian(problem, x, d, storedb, key)">getApproxHessian</a>	Computes an approximation of the Hessian of the cost fun. at x along d.</li><li><a href="getEuclideanGradient.html" class="code" title="function egrad = getEuclideanGradient(problem, x, storedb, key)">getEuclideanGradient</a>	Computes the Euclidean gradient of the cost function at x.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../manopt/solvers/preconditioners/preconhessiansolve.html" class="code" title="function preconfun = preconhessiansolve(problem, options)">preconhessiansolve</a>	Preconditioner based on the inverse Hessian, by solving linear systems.</li><li><a href="../../manopt/solvers/trustregions/tCG.html" class="code" title="function [eta, Heta, inner_it, stop_tCG]= tCG(problem, x, grad, eta, Delta, options, storedb, key)">tCG</a>	tCG - Truncated (Steihaug-Toint) Conjugate-Gradient method</li><li><a href="../../manopt/solvers/trustregions/trustregions.html" class="code" title="function [x, cost, info, options] = trustregions(problem, x, options)">trustregions</a>	Riemannian trust-regions solver for optimization on manifolds.</li><li><a href="../../manopt/tools/checkhessian.html" class="code" title="function checkhessian(problem, x, d)">checkhessian</a>	Checks the consistency of the cost function and the Hessian.</li><li><a href="../../manopt/tools/hessianextreme.html" class="code" title="function [y, lambda] = hessianextreme(problem, x, side, y0, options, storedb, key)">hessianextreme</a>	Compute an extreme eigenvector / eigenvalue of the Hessian of a problem.</li><li><a href="../../manopt/tools/hessianspectrum.html" class="code" title="function lambdas = hessianspectrum(problem, x, usepreconstr, storedb, key)">hessianspectrum</a>	Returns the eigenvalues of the (preconditioned) Hessian at x.</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function hess = getHessian(problem, x, d, storedb, key)</a>
0002 <span class="comment">% Computes the Hessian of the cost function at x along d.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% function hess = getHessian(problem, x, d)</span>
0005 <span class="comment">% function hess = getHessian(problem, x, d, storedb)</span>
0006 <span class="comment">% function hess = getHessian(problem, x, d, storedb, key)</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% Returns the Hessian at x along d of the cost function described in the</span>
0009 <span class="comment">% problem structure.</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% storedb is a StoreDB object, key is the StoreDB key to point x.</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% If an exact Hessian is not provided, an approximate Hessian is returned</span>
0014 <span class="comment">% if possible, without warning. If not possible, an exception will be</span>
0015 <span class="comment">% thrown. To check whether an exact Hessian is available or not (typically</span>
0016 <span class="comment">% to issue a warning if not), use canGetHessian.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% See also: getPrecon getApproxHessian canGetHessian</span>
0019 
0020 <span class="comment">% This file is part of Manopt: www.manopt.org.</span>
0021 <span class="comment">% Original author: Nicolas Boumal, Dec. 30, 2012.</span>
0022 <span class="comment">% Contributors:</span>
0023 <span class="comment">% Change log:</span>
0024 <span class="comment">%</span>
0025 <span class="comment">%   April 3, 2015 (NB):</span>
0026 <span class="comment">%       Works with the new StoreDB class system.</span>
0027 
0028     <span class="comment">% Allow omission of the key, and even of storedb.</span>
0029     <span class="keyword">if</span> ~exist(<span class="string">'key'</span>, <span class="string">'var'</span>)
0030         <span class="keyword">if</span> ~exist(<span class="string">'storedb'</span>, <span class="string">'var'</span>)
0031             storedb = <a href="StoreDB.html" class="code" title="">StoreDB</a>();
0032         <span class="keyword">end</span>
0033         key = storedb.getNewKey();
0034     <span class="keyword">end</span>
0035     
0036     
0037     <span class="keyword">if</span> isfield(problem, <span class="string">'hess'</span>)
0038     <span class="comment">%% Compute the Hessian using hess.</span>
0039     
0040         <span class="comment">% Check whether this function wants to deal with storedb or not.</span>
0041         <span class="keyword">switch</span> nargin(problem.hess)
0042             <span class="keyword">case</span> 2
0043                 hess = problem.hess(x, d);
0044             <span class="keyword">case</span> 3
0045                 <span class="comment">% Obtain, pass along, and save the store for x.</span>
0046                 store = storedb.getWithShared(key);
0047                 [hess, store] = problem.hess(x, d, store);
0048                 storedb.setWithShared(store, key);
0049             <span class="keyword">case</span> 4
0050                 <span class="comment">% Pass along the whole storedb (by reference), with key.</span>
0051                 hess = problem.hess(x, d, storedb, key);
0052             <span class="keyword">otherwise</span>
0053                 up = MException(<span class="string">'manopt:getHessian:badhess'</span>, <span class="keyword">...</span>
0054                     <span class="string">'hess should accept 2, 3 or 4 inputs.'</span>);
0055                 throw(up);
0056         <span class="keyword">end</span>
0057     
0058     <span class="keyword">elseif</span> isfield(problem, <span class="string">'ehess'</span>) &amp;&amp; <a href="canGetEuclideanGradient.html" class="code" title="function candoit = canGetEuclideanGradient(problem)">canGetEuclideanGradient</a>(problem)
0059     <span class="comment">%% Compute the Hessian using ehess.</span>
0060     
0061         <span class="comment">% We will need the Euclidean gradient for the conversion from the</span>
0062         <span class="comment">% Euclidean Hessian to the Riemannian Hessian.</span>
0063         egrad = <a href="getEuclideanGradient.html" class="code" title="function egrad = getEuclideanGradient(problem, x, storedb, key)">getEuclideanGradient</a>(problem, x, storedb, key);
0064         
0065         <span class="comment">% Check whether this function wants to deal with storedb or not.</span>
0066         <span class="keyword">switch</span> nargin(problem.ehess)
0067             <span class="keyword">case</span> 2
0068                 ehess = problem.ehess(x, d);
0069             <span class="keyword">case</span> 3
0070                 <span class="comment">% Obtain, pass along, and save the store for x.</span>
0071                 store = storedb.getWithShared(key);
0072                 [ehess, store] = problem.ehess(x, d, store);
0073                 storedb.setWithShared(store, key);
0074             <span class="keyword">case</span> 4
0075                 <span class="comment">% Pass along the whole storedb (by reference), with key.</span>
0076                 ehess = problem.ehess(x, d, storedb, key);
0077             <span class="keyword">otherwise</span>
0078                 up = MException(<span class="string">'manopt:getHessian:badehess'</span>, <span class="keyword">...</span>
0079                     <span class="string">'ehess should accept 2, 3 or 4 inputs.'</span>);
0080                 throw(up);
0081         <span class="keyword">end</span>
0082         
0083         <span class="comment">% Convert to the Riemannian Hessian</span>
0084         hess = problem.M.ehess2rhess(x, egrad, ehess, d);
0085         
0086     <span class="keyword">else</span>
0087     <span class="comment">%% Attempt the computation of an approximation of the Hessian.</span>
0088         
0089         hess = <a href="getApproxHessian.html" class="code" title="function approxhess = getApproxHessian(problem, x, d, storedb, key)">getApproxHessian</a>(problem, x, d, storedb, key);
0090         
0091     <span class="keyword">end</span>
0092     
0093 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Mon 06-Jul-2015 21:55:36 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>